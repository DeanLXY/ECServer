<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace :命名空间需要 接口的全限定名 #{version} 占位符 , version随意些 -->
<mapper namespace="zz.itcast.ecserver.dao.IFavoritesDao">

	<select id="getFavoritesList"  parameterType="int" resultType="product">
	SELECT id,NAME,price,marketprice,pic,commentcount,isgift FROM favorites WHERE userid = #{0} LIMIT #{1},#{2}

	</select>
	
	<insert id="addNewFavorites" parameterType="map" >
		<selectKey keyProperty="id" order="AFTER" resultType="int">
			select LAST_INSERT_ID()
		</selectKey>
		
		INSERT INTO favorites
		(userid,productid,NAME,price,marketprice,pic,commentcount,isgift) 
		VALUES( #{userid} 
		,#{product.id} , #{product.name},#{product.price},#{product.marketprice},#{product.pic},#{product.commentcount}, #{product.isgift})
	</insert>
	
	<select id="getFavoritesById" parameterType="int" resultType="product">
		SELECT * FROM favorites WHERE productid = #{1} and userid=#{0}
	</select>

</mapper>